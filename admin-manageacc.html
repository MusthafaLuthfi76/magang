<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Akun ‚Äî Dinas Koperasi UKM</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #1e293b;
            display: flex;
            min-height: 100vh;
        }

        /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            background: white;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            margin-bottom: 10px;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .toast.success {
            border-left: 4px solid #10b981;
        }

        .toast.error {
            border-left: 4px solid #ef4444;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ‚îÄ‚îÄ MOBILE MENU TOGGLE ‚îÄ‚îÄ */
        .mobile-menu-toggle {
            display: none;
            position: absolute;
            top: 28px;
            left: 20px;
            z-index: 100;
            background: transparent;
            border: none;
            padding: 8px;
            cursor: pointer;
        }

        .mobile-menu-toggle svg {
            width: 24px;
            height: 24px;
            stroke: #1e293b;
            fill: none;
            stroke-width: 2.5;
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
        .sidebar {
            width: 252px;
            background: white;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 20px 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .sidebar-header-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-icon {
            width: 40px;
            height: 40px;
            background: #0f172a;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }

        .sidebar-subtitle {
            font-size: 12px;
            color: #64748b;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            overflow-y: auto;
        }

        .sidebar-footer {
            padding: 16px 12px;
            border-top: 1px solid #e5e7eb;
        }

        .nav-section-label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
            padding: 8px 16px 4px;
            margin-top: 4px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 12px 16px;
            border-radius: 10px;
            font-weight: 500;
            font-size: 15px;
            color: #0f172a;
            text-decoration: none;
            position: relative;
            transition: all 0.15s ease;
        }

        .nav-item:hover {
            background: #f8fafc;
        }

        .nav-item.active {
            background: #f1f5f9;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 8px;
            bottom: 8px;
            width: 4px;
            background: #0f172a;
            border-radius: 0 4px 4px 0;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            fill: none;
            stroke-width: 1.8;
            flex-shrink: 0;
        }

        /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-left: 252px;
            transition: margin-left 0.3s ease;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 24px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
        }

        .header-left .header-title {
            font-size: 24px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .header-left .header-subtitle {
            font-size: 14px;
            color: #64748b;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .container {
            padding: 24px 32px;
        }

        /* ‚îÄ‚îÄ STAT CARDS ‚îÄ‚îÄ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            background: white;
        }

        .stat-label {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
        }

        /* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
        .card {
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            margin-bottom: 24px;
        }

        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }

        /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
        .btn {
            padding: 6px 14px;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            background: white;
            color: #1e293b;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        .btn:active {
            transform: scale(.98);
        }

        .btn-sm {
            padding: 4px 10px;
            font-size: 12px;
        }

        .btn-primary {
            background: #0f172a;
            color: white;
            border-color: #0f172a;
        }

        .btn-primary:hover {
            background: #1e293b;
        }

        .btn-danger {
            background: #fef2f2;
            color: #dc2626;
            border-color: #fca5a5;
        }

        .btn-danger:hover {
            background: #fee2e2;
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
            border-color: #f59e0b;
        }

        .btn-warning:hover {
            background: #d97706;
        }

        .btn[disabled] {
            opacity: 0.6;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* ‚îÄ‚îÄ FILTER ‚îÄ‚îÄ */
        .filter-container {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input,
        .select-input {
            padding: 8px 12px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            outline: none;
            transition: border-color 0.2s;
        }

        .search-input:focus,
        .select-input:focus {
            border-color: #0f172a;
        }

        .search-input {
            width: 240px;
            min-width: 150px;
        }

        .select-input {
            min-width: 140px;
        }

        /* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 700px;
        }

        th {
            text-align: left;
            padding: 12px 16px;
            font-size: 13px;
            font-weight: 600;
            color: #64748b;
            background: #f8fafc;
            border-bottom: 1px solid #e5e7eb;
            white-space: nowrap;
        }

        td {
            padding: 14px 16px;
            font-size: 14px;
            color: #1e293b;
            border-bottom: 1px solid #f1f5f9;
        }

        tbody tr:hover {
            background: #fafbfc;
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .action-buttons {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        /* ‚îÄ‚îÄ AVATAR ‚îÄ‚îÄ */
        .avatar {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }

        .user-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-cell-name {
            font-weight: 600;
            font-size: 14px;
            color: #1e293b;
        }

        .user-cell-email {
            font-size: 12px;
            color: #64748b;
            margin-top: 1px;
        }

        .user-cell-id {
            font-size: 10px;
            color: #94a3b8;
            margin-top: 1px;
            font-family: monospace;
        }

        /* ‚îÄ‚îÄ BADGES ‚îÄ‚îÄ */
        .badge {
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }

        .badge-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .badge-super {
            background: #1e293b;
            color: white;
        }

        .badge-super .badge-dot {
            background: #f59e0b;
        }

        .badge-admin {
            background: #eff6ff;
            color: #1d4ed8;
        }

        .badge-admin .badge-dot {
            background: #3b82f6;
        }

        .badge-viewer {
            background: #f0fdf4;
            color: #166534;
        }

        .badge-viewer .badge-dot {
            background: #22c55e;
        }

        /* ‚îÄ‚îÄ MOBILE CARDS ‚îÄ‚îÄ */
        .documents-card {
            display: none;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 12px;
            background: white;
            box-sizing: border-box;
        }

        .documents-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            gap: 12px;
        }

        .documents-card-title {
            font-weight: 600;
            font-size: 15px;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .documents-card-subtitle {
            font-size: 13px;
            color: #64748b;
        }

        .documents-card-body {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }

        .documents-card-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            gap: 8px;
        }

        .documents-card-label {
            color: #64748b;
            font-size: 13px;
            flex-shrink: 0;
        }

        .documents-card-value {
            color: #1e293b;
            font-weight: 500;
            word-wrap: break-word;
            text-align: right;
            flex: 1;
        }

        .documents-card-footer {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            padding-top: 12px;
            border-top: 1px solid #f1f5f9;
        }

        /* ‚îÄ‚îÄ PAGINATION ‚îÄ‚îÄ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 16px;
            flex-wrap: wrap;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }

        .pagination button:hover:not(:disabled) {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination button.active {
            background: #0f172a;
            color: white;
            border-color: #0f172a;
        }

        .pagination-info {
            font-size: 14px;
            color: #64748b;
            padding: 0 8px;
        }

        /* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal {
            background: white;
            border-radius: 8px;
            max-width: 520px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            animation: modalIn 0.2s ease-out;
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(.96) translateY(-8px);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }

        .modal-close {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 6px;
            color: #64748b;
        }

        .modal-close:hover {
            background: #f1f5f9;
            color: #1e293b;
        }

        .modal-content {
            padding: 24px;
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        /* Form */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .input-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            margin-bottom: 6px;
        }

        .input-label .req {
            color: #ef4444;
            margin-left: 2px;
        }

        .input-field {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            color: #1e293b;
            outline: none;
            transition: all 0.2s;
        }

        .input-field:focus {
            border-color: #0f172a;
            box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.08);
        }

        .input-field.err {
            border-color: #ef4444;
        }

        .field-hint {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 4px;
        }

        .field-err {
            font-size: 12px;
            color: #ef4444;
            margin-top: 4px;
            display: none;
        }

        /* Role picker */
        .role-opts {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .role-opt {
            position: relative;
        }

        .role-opt input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .role-opt-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 12px 8px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.15s;
            text-align: center;
        }

        .role-opt input:checked+.role-opt-label {
            border-color: #0f172a;
            background: #f8fafc;
        }

        .role-opt-label .role-ico {
            font-size: 20px;
        }

        .role-opt-label .role-nm {
            font-size: 12px;
            font-weight: 700;
            color: #1e293b;
        }

        .role-opt-label .role-ds {
            font-size: 10px;
            color: #94a3b8;
        }

        /* Confirm modal */
        .confirm-modal {
            max-width: 380px;
        }

        .confirm-ico {
            width: 52px;
            height: 52px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 24px;
        }

        .confirm-title {
            font-size: 17px;
            font-weight: 700;
            color: #1e293b;
            text-align: center;
            margin-bottom: 8px;
        }

        .confirm-msg {
            font-size: 14px;
            color: #64748b;
            text-align: center;
            line-height: 1.5;
        }

        /* View modal grid */
        .view-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0 20px;
        }

        .view-field {
            margin-bottom: 14px;
        }

        .view-field-label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: .05em;
            color: #94a3b8;
            margin-bottom: 3px;
        }

        .view-field-value {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }

        /* Info banner */
        .info-banner {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #1e3a8a;
        }

        /* Super admin banner */
        .superadmin-banner {
            background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 100%);
            border-radius: 8px;
            padding: 16px 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .superadmin-banner-icon {
            font-size: 28px;
        }

        .superadmin-banner-title {
            color: white;
            font-size: 15px;
            font-weight: 700;
        }

        .superadmin-banner-sub {
            color: #94a3b8;
            font-size: 12px;
            margin-top: 2px;
        }

        .superadmin-badge {
            margin-left: auto;
            background: rgba(245, 158, 11, 0.18);
            border: 1px solid rgba(245, 158, 11, 0.4);
            border-radius: 20px;
            padding: 5px 14px;
            font-size: 11px;
            font-weight: 800;
            color: #f59e0b;
            letter-spacing: .05em;
            white-space: nowrap;
        }

        /* Loading / spinner */
        .loading {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #e5e7eb;
            border-top-color: #0f172a;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .spinner-sm {
            width: 16px;
            height: 16px;
            border-width: 2px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* API bar */
        .api-bar {
            display: none;
            padding: 10px 24px;
            font-size: 12px;
            font-weight: 600;
            align-items: center;
            gap: 8px;
        }

        .api-bar.loading {
            display: flex;
            background: #fffbeb;
            border-bottom: 1px solid #fde68a;
            color: #92400e;
        }

        .api-bar.ok {
            display: flex;
            background: #f0fdf4;
            border-bottom: 1px solid #bbf7d0;
            color: #166534;
        }

        .api-bar.err {
            display: flex;
            background: #fef2f2;
            border-bottom: 1px solid #fca5a5;
            color: #dc2626;
        }

        .api-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: currentColor;
            flex-shrink: 0;
        }

        /* Empty */
        .empty-state {
            text-align: center;
            padding: 52px 20px;
            color: #94a3b8;
        }

        .empty-state-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .empty-state-text {
            font-size: 15px;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 4px;
        }

        .empty-state-sub {
            font-size: 13px;
        }

        /* User info (sidebar footer) */
        .user-info {
            padding: 0 12px;
            margin-bottom: 12px;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 2px;
        }

        .user-email {
            font-size: 12px;
            color: #64748b;
        }

        .logout-btn {
            width: 100%;
            padding: 10px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #1e293b;
            font-family: 'Inter', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.15s;
        }

        .logout-btn:hover {
            background: #fef2f2;
            color: #dc2626;
            border-color: #fca5a5;
        }

        /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
        @media (max-width: 1023px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .sidebar-overlay.active {
                display: block;
            }

            .main-content {
                margin-left: 0;
            }

            .header {
                padding: 24px 20px;
                padding-left: 60px;
            }

            .container {
                padding: 20px 16px;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .table-container {
                display: none;
            }

            .documents-card {
                display: block;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            .header-left .header-title {
                font-size: 20px;
            }

            .role-opts {
                grid-template-columns: 1fr;
            }

            .superadmin-badge {
                margin-left: 0;
            }
        }
    </style>
</head>

<body>

    <div class="toast-container" id="toastContainer"></div>

    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <svg viewBox="0 0 24 24">
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="18" x2="21" y2="18" />
        </svg>
    </button>
    <div class="sidebar-overlay" onclick="toggleMobileMenu()"></div>

    <!-- ‚ïê‚ïê SIDEBAR ‚ïê‚ïê -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-header-content">
                <div class="sidebar-icon">
                    <img src="https://yt3.googleusercontent.com/ytc/AIdro_lAD91TqpEoBLA60qxJfjXPWjPJG1qCHBRz8ZomYP_tkA=s900-c-k-c0x00ffffff-no-rj"
                        alt="Logo" style="width:40px;height:40px;object-fit:cover;border-radius:8px;">
                </div>
                <div>
                    <div class="sidebar-title">Admin Panel</div>
                    <div class="sidebar-subtitle">Dinas Koperasi UKM</div>
                </div>
            </div>
        </div>
        <div class="sidebar-nav">
            <a href="admin-dashboard.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="7" height="7" rx="1" />
                    <rect x="14" y="3" width="7" height="7" rx="1" />
                    <rect x="3" y="14" width="7" height="7" rx="1" />
                    <rect x="14" y="14" width="7" height="7" rx="1" />
                </svg>
                Dashboard
            </a>
            <a href="admin-requests.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" />
                    <path d="M14 3v6h6" />
                </svg>
                Kendaraan Dinas
            </a>
            <a href="admin-voucher-bbm.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M12 6v6l4 2" />
                </svg>
                Voucher BBM
            </a>
            <a href="admin-ruang-rapat.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" />
                    <line x1="16" y1="2" x2="16" y2="6" />
                    <line x1="8" y1="2" x2="8" y2="6" />
                    <line x1="3" y1="10" x2="21" y2="10" />
                </svg>
                Ruang Rapat
            </a>
            <a href="admin-kearsipan.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                </svg>
                Kearsipan Internal
            </a>
            <a href="admin-spj-keuangan.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <line x1="12" y1="1" x2="12" y2="23" />
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                </svg>
                Penilaian SPJ Keuangan
            </a>
            <a href="admin-spj-pengumpulan.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                    <line x1="16" y1="13" x2="8" y2="13" />
                    <line x1="16" y1="17" x2="8" y2="17" />
                </svg>
                Pengumpulan SPJ
            </a>
            <a href="admin-pengajuan-dana.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                    <line x1="12" y1="18" x2="12" y2="12" />
                    <line x1="9" y1="15" x2="15" y2="15" />
                </svg>
                Pengajuan Dana
            </a>
            <a href="admin-penilaian-monev.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M9 11l3 3L22 4" />
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                </svg>
                Penilaian Monev
            </a>
            <a href="admin-manageacc.html" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                </svg>
                Manajemen Akun
            </a>
        </div>
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-name" id="admin-name">Super Administrator</div>
                <div class="user-email" id="admin-email">superadmin@dinas.gov.id</div>
            </div>
            <button onclick="logout()" class="logout-btn">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    <polyline points="16 17 21 12 16 7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                Keluar
            </button>
        </div>
    </div>

    <!-- ‚ïê‚ïê MAIN ‚ïê‚ïê -->
    <div class="main-content">
        <div class="header">
            <div class="header-left">
                <h1 class="header-title">Manajemen Akun</h1>
                <p class="header-subtitle" id="headerDate">Sistem pengelolaan akun pengguna</p>
            </div>
            <div class="header-right">
                <button class="btn" onclick="loadUsers()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <polyline points="23 4 23 10 17 10" />
                        <polyline points="1 20 1 14 7 14" />
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
                    </svg>
                    Refresh
                </button>
                <button class="btn btn-primary" onclick="openForm('add')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                    Tambah Akun
                </button>
            </div>
        </div>

        <div class="container">

            <!-- Banner -->
            <div class="superadmin-banner">
                <div>
                    <div class="superadmin-banner-title">Halaman Khusus Super Admin</div>
                    <div class="superadmin-banner-sub">CRUD akun pengguna langsung terhubung ke Google Sheets via Apps
                        Script</div>
                </div>
                <div class="superadmin-badge">SUPER ADMIN ACCESS</div>
            </div>

            <!-- Stat Cards -->
            <div class="stats-grid">
                <div class="stat-card" style="border-left:4px solid #10b981">
                    <div class="stat-label">Total Akun</div>
                    <div class="stat-value" id="statTotal">0</div>
                </div>
                <div class="stat-card" style="border-left:4px solid #3b82f6">
                    <div class="stat-label">Admin</div>
                    <div class="stat-value" id="statAdmin">0</div>
                </div>
                <div class="stat-card" style="border-left:4px solid #22c55e">
                    <div class="stat-label">Viewer</div>
                    <div class="stat-value" id="statViewer">0</div>
                </div>
                <div class="stat-card" style="border-left:4px solid #8b5cf6">
                    <div class="stat-label">Super Admin</div>
                    <div class="stat-value" id="statSuper">0</div>
                </div>
            </div>

            <!-- Table Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Daftar Akun Pengguna</h2>
                    <div class="filter-container">
                        <select class="select-input" id="fltRole" onchange="applyFilter()">
                            <option value="">Semua Role</option>
                            <option value="superadmin">Super Admin</option>
                            <option value="admin">Admin</option>
                            <option value="viewer">Viewer</option>
                        </select>
                        <input type="text" class="search-input" id="searchQ" placeholder="Cari nama / email..."
                            oninput="applyFilter()">
                    </div>
                </div>

                <!-- API status bar -->
                <div class="api-bar" id="apiBar"></div>

                <!-- Desktop Table -->
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th style="width:40px">#</th>
                                <th>Pengguna</th>
                                <th>Role</th>
                                <th>Dibuat</th>
                                <th style="text-align:center;width:130px">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="tblBody">
                            <tr>
                                <td colspan="5" class="loading">
                                    <div class="spinner"></div>
                                    <p style="margin-top:16px">Memuat data...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Mobile Cards -->
                <div id="mobileCards" style="padding:0 16px 8px"></div>

                <!-- Pagination -->
                <div class="pagination" id="pagination"></div>
            </div>

        </div>
    </div>

    <!-- ‚ïê‚ïê MODAL: TAMBAH / EDIT ‚ïê‚ïê -->
    <div class="modal-overlay" id="ovForm" style="display:none">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title" id="formTitle">Tambah Akun Baru</span>
                <button class="modal-close" onclick="closeModal('ovForm')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-content">
                <div class="info-banner">
                    üë§ Isi data akun dengan lengkap. Password minimal 8 karakter dan akan di-hash SHA-256 di server.
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="input-label">Nama Lengkap <span class="req">*</span></label>
                        <input type="text" class="input-field" id="fName" placeholder="cth. Budi Santoso">
                        <div class="field-err" id="eName">Nama wajib diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="input-label">Email <span class="req">*</span></label>
                        <input type="email" class="input-field" id="fEmail" placeholder="cth. budi@dinas.gov.id">
                        <div class="field-err" id="eEmail">Email tidak valid</div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="input-label">Password <span class="req" id="passReqMark">*</span></label>
                    <input type="password" class="input-field" id="fPassword" placeholder="Minimal 8 karakter">
                    <div class="field-hint" id="passHint" style="display:none">Kosongkan jika tidak ingin mengubah
                        password</div>
                    <div class="field-err" id="ePassword">Password minimal 8 karakter</div>
                </div>
                <div class="form-group" style="margin-bottom:0">
                    <label class="input-label">Role Akun <span class="req">*</span></label>
                    <div class="role-opts">
                        <div class="role-opt">
                            <input type="radio" name="fRole" id="rSuper" value="superadmin">
                            <label class="role-opt-label" for="rSuper">
                                <span class="role-ico">üõ°Ô∏è</span>
                                <span class="role-nm">Super Admin</span>
                                <span class="role-ds">Akses penuh + kelola akun</span>
                            </label>
                        </div>
                        <div class="role-opt">
                            <input type="radio" name="fRole" id="rAdmin" value="admin" checked>
                            <label class="role-opt-label" for="rAdmin">
                                <span class="role-ico">‚öôÔ∏è</span>
                                <span class="role-nm">Admin</span>
                                <span class="role-ds">Input & kelola data</span>
                            </label>
                        </div>
                        <div class="role-opt">
                            <input type="radio" name="fRole" id="rViewer" value="viewer">
                            <label class="role-opt-label" for="rViewer">
                                <span class="role-ico">üëÅÔ∏è</span>
                                <span class="role-nm">Viewer</span>
                                <span class="role-ds">Baca data saja</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeModal('ovForm')">Batal</button>
                <button class="btn btn-primary" id="btnSave" onclick="saveAccount()">
                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <polyline points="20 6 9 17 4 12" />
                    </svg>
                    <span id="saveLbl">Simpan Akun</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê MODAL: DETAIL ‚ïê‚ïê -->
    <div class="modal-overlay" id="ovView" style="display:none">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title">Detail Akun</span>
                <button class="modal-close" onclick="closeModal('ovView')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-content">
                <div
                    style="display:flex;align-items:center;gap:14px;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #f1f5f9">
                    <div class="avatar" id="vAv" style="width:48px;height:48px;font-size:18px;border-radius:12px"></div>
                    <div>
                        <div style="font-size:16px;font-weight:700;color:#1e293b" id="vName">‚Äî</div>
                        <div style="font-size:13px;color:#64748b;margin-top:2px" id="vEmail">‚Äî</div>
                        <div style="margin-top:6px" id="vRoleBadge"></div>
                    </div>
                </div>
                <div class="view-grid">
                    <div class="view-field">
                        <div class="view-field-label">User ID</div>
                        <div class="view-field-value" id="vId"
                            style="font-family:monospace;font-size:11px;word-break:break-all">‚Äî</div>
                    </div>
                    <div class="view-field">
                        <div class="view-field-label">Role</div>
                        <div class="view-field-value" id="vRole">‚Äî</div>
                    </div>
                    <div class="view-field">
                        <div class="view-field-label">Email</div>
                        <div class="view-field-value" id="vEmailFull" style="font-size:13px">‚Äî</div>
                    </div>
                    <div class="view-field">
                        <div class="view-field-label">Dibuat</div>
                        <div class="view-field-value" id="vCreated">‚Äî</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeModal('ovView')">Tutup</button>
                <button class="btn btn-warning" id="vEditBtn">
                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                    </svg>
                    Edit Akun
                </button>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê MODAL: KONFIRMASI HAPUS ‚ïê‚ïê -->
    <div class="modal-overlay" id="ovDelete" style="display:none">
        <div class="modal confirm-modal">
            <div class="modal-content" style="padding:28px 24px">
                <div class="confirm-ico" style="background:#fef2f2">üóëÔ∏è</div>
                <div class="confirm-title">Hapus Akun?</div>
                <div class="confirm-msg">Akun <strong id="delName">‚Äî</strong> akan dihapus permanen dari Google
                    Sheets.<br>Tindakan ini tidak dapat dibatalkan.</div>
            </div>
            <div class="modal-footer" style="justify-content:center">
                <button class="btn" onclick="closeModal('ovDelete')">Batal</button>
                <button class="btn btn-danger" id="btnConfirmDel">
                    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <polyline points="3 6 5 6 21 6" />
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                    </svg>
                    Ya, Hapus
                </button>
            </div>
        </div>
    </div>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // KONFIGURASI
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const GAS_URL = 'https://script.google.com/macros/s/AKfycbwdoNgul4b9i-bzHvWFgnFa9kAj5JDw-UIbSoVpUuQhvaAvSRIJOyK_-1wBqDe1VIhh/exec';
        // Contoh: 'https://script.google.com/macros/s/AKfycbxXXXXXXXXX/exec'

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // STATE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let allUsers = [];
        let filteredUsers = [];
        let currentPage = 1;
        const PAGE_SIZE = 10;
        let editingId = null;

        const AV_COLORS = ['#3b82f6', '#8b5cf6', '#ef4444', '#f59e0b', '#10b981', '#ec4899', '#0ea5e9', '#14b8a6', '#f97316'];
        function avColor(email) {
            let h = 0;
            for (const c of (email || '')) h = (h << 5) - h + c.charCodeAt(0);
            return AV_COLORS[Math.abs(h) % AV_COLORS.length];
        }
        function initials(name) {
            return (name || '').split(' ').filter(Boolean).slice(0, 2).map(w => w[0]).join('').toUpperCase() || '?';
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // INIT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        document.addEventListener('DOMContentLoaded', () => {
            const u = safeUser();
            document.getElementById('admin-name').textContent = u.name || 'Super Administrator';
            document.getElementById('admin-email').textContent = u.email || 'superadmin@dinas.gov.id';
            document.getElementById('headerDate').textContent = new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            loadUsers();
        });

        function safeUser() { try { return JSON.parse(localStorage.getItem('user') || '{}'); } catch { return {}; } }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // MOBILE MENU
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function toggleMobileMenu() {
            document.getElementById('sidebar').classList.toggle('open');
            document.querySelector('.sidebar-overlay').classList.toggle('active');
        }
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => { if (window.innerWidth < 1024) toggleMobileMenu(); });
        });

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // TOAST
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const Toast = {
            show(msg, type = 'success') {
                const c = document.getElementById('toastContainer');
                const t = document.createElement('div');
                t.className = `toast ${type}`;
                t.innerHTML = `
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" style="color:${type === 'success' ? '#10b981' : '#ef4444'};flex-shrink:0">
                ${type === 'success'
                        ? '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>'
                        : '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>'
                    }
            </svg>
            <span>${esc(msg)}</span>`;
                c.appendChild(t);
                setTimeout(() => t.remove(), 3500);
            },
            success(m) { this.show(m, 'success'); },
            error(m) { this.show(m, 'error'); }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // JSONP ‚Äì GAS request wrapper
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function gasRequest(payload) {
            return new Promise((resolve, reject) => {
                const cb = '__gas_' + Date.now() + '_' + Math.floor(Math.random() * 9999);
                const body = encodeURIComponent(JSON.stringify(payload));
                const url = `${GAS_URL}?jsonBody=${body}&callback=${cb}`;
                const script = document.createElement('script');
                let done = false;
                window[cb] = data => { done = true; delete window[cb]; script.remove(); resolve(data); };
                script.onerror = () => { if (done) return; delete window[cb]; script.remove(); reject(new Error('Gagal terhubung. Pastikan GAS_URL sudah benar.')); };
                setTimeout(() => { if (done) return; delete window[cb]; script.remove(); reject(new Error('Request timeout (15s)')); }, 15000);
                script.src = url;
                document.head.appendChild(script);
            });
        }

        function gasGet(params) {
            return new Promise((resolve, reject) => {
                const cb = '__gas_' + Date.now() + '_' + Math.floor(Math.random() * 9999);
                const qs = new URLSearchParams({ ...params, callback: cb }).toString();
                const script = document.createElement('script');
                let done = false;
                window[cb] = data => { done = true; delete window[cb]; script.remove(); resolve(data); };
                script.onerror = () => { if (done) return; delete window[cb]; script.remove(); reject(new Error('Gagal terhubung ke server')); };
                setTimeout(() => { if (done) return; delete window[cb]; script.remove(); reject(new Error('Timeout')); }, 15000);
                script.src = `${GAS_URL}?${qs}`;
                document.head.appendChild(script);
            });
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // LOAD USERS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        async function loadUsers() {
            showApiBar('loading', 'Memuat data dari Google Sheets‚Ä¶');
            setTableLoading();
            try {
                const res = await gasGet({ action: 'getUsers' });
                if (res.status === 'success') {
                    allUsers = res.users || [];
                    showApiBar('ok', `Berhasil memuat ${allUsers.length} akun dari Google Sheets`);
                    applyFilter();
                } else {
                    throw new Error(res.message || 'Gagal memuat data');
                }
            } catch (err) {
                showApiBar('err', err.message);
                Toast.error('Gagal memuat data: ' + err.message);
                allUsers = [];
                applyFilter();
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // FILTER & RENDER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function applyFilter() {
            const q = document.getElementById('searchQ').value.trim().toLowerCase();
            const role = document.getElementById('fltRole').value;
            filteredUsers = allUsers.filter(u => {
                const mQ = !q || u.name.toLowerCase().includes(q) || u.email.toLowerCase().includes(q);
                const mR = !role || u.role === role;
                return mQ && mR;
            });
            currentPage = 1;
            renderStats();
            render();
        }

        function renderStats() {
            document.getElementById('statTotal').textContent = allUsers.length;
            document.getElementById('statAdmin').textContent = allUsers.filter(u => u.role === 'admin').length;
            document.getElementById('statViewer').textContent = allUsers.filter(u => u.role === 'viewer').length;
            document.getElementById('statSuper').textContent = allUsers.filter(u => u.role === 'superadmin').length;
        }

        function render() {
            const start = (currentPage - 1) * PAGE_SIZE;
            const items = filteredUsers.slice(start, start + PAGE_SIZE);
            const tbody = document.getElementById('tblBody');
            const cards = document.getElementById('mobileCards');
            const pager = document.getElementById('pagination');

            if (filteredUsers.length === 0) {
                const emptyHtml = `<div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <div class="empty-state-text">Tidak ada akun yang sesuai</div>
            <div class="empty-state-sub">Coba ubah kata kunci atau filter pencarian</div>
        </div>`;
                tbody.innerHTML = `<tr><td colspan="5">${emptyHtml}</td></tr>`;
                cards.innerHTML = emptyHtml;
                pager.innerHTML = '';
                return;
            }

            // Desktop table rows
            tbody.innerHTML = items.map((u, i) => {
                const no = start + i + 1;
                const ini = initials(u.name);
                const col = avColor(u.email);
                return `<tr>
            <td style="color:#94a3b8;font-weight:600;font-size:12px">${no}</td>
            <td>
                <div class="user-cell">
                    <div class="avatar" style="background:${col}">${ini}</div>
                    <div>
                        <div class="user-cell-name">${esc(u.name)}</div>
                        <div class="user-cell-email">${esc(u.email)}</div>
                        <div class="user-cell-id">${esc(u.id)}</div>
                    </div>
                </div>
            </td>
            <td>${roleBadge(u.role)}</td>
            <td style="font-size:13px;color:#64748b">${fmtDate(u.createdAt)}</td>
            <td>
                <div class="action-buttons" style="justify-content:center">
                    <button onclick="viewUser('${escA(u.id)}')" class="btn btn-sm" title="Detail">
                        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    </button>
                    <button onclick="openForm('edit','${escA(u.id)}')" class="btn btn-sm" title="Edit">
                        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                    </button>
                    <button onclick="confirmDelete('${escA(u.id)}')" class="btn btn-sm btn-danger" title="Hapus">
                        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                    </button>
                </div>
            </td>
        </tr>`;
            }).join('');

            // Mobile cards
            cards.innerHTML = items.map(u => {
                const ini = initials(u.name);
                const col = avColor(u.email);
                return `<div class="documents-card">
            <div class="documents-card-header">
                <div style="display:flex;align-items:center;gap:10px;flex:1">
                    <div class="avatar" style="background:${col}">${ini}</div>
                    <div>
                        <div class="documents-card-title">${esc(u.name)}</div>
                        <div class="documents-card-subtitle">${esc(u.email)}</div>
                    </div>
                </div>
                ${roleBadge(u.role)}
            </div>
            <div class="documents-card-body">
                <div class="documents-card-row">
                    <span class="documents-card-label">User ID</span>
                    <span class="documents-card-value" style="font-family:monospace;font-size:11px">${esc(u.id)}</span>
                </div>
                <div class="documents-card-row">
                    <span class="documents-card-label">Dibuat</span>
                    <span class="documents-card-value">${fmtDate(u.createdAt)}</span>
                </div>
            </div>
            <div class="documents-card-footer">
                <button onclick="viewUser('${escA(u.id)}')" class="btn btn-sm" style="flex:1">üëÅÔ∏è Detail</button>
                <button onclick="openForm('edit','${escA(u.id)}')" class="btn btn-sm" style="flex:1">‚úèÔ∏è Edit</button>
                <button onclick="confirmDelete('${escA(u.id)}')" class="btn btn-sm btn-danger" style="flex:1">üóëÔ∏è Hapus</button>
            </div>
        </div>`;
            }).join('');

            // Pagination
            const totalPages = Math.ceil(filteredUsers.length / PAGE_SIZE);
            if (totalPages <= 1) { pager.innerHTML = ''; return; }
            pager.innerHTML = `
        <button onclick="goPage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>‚Äπ Prev</button>
        <span class="pagination-info">Halaman ${currentPage} dari ${totalPages} (${filteredUsers.length} akun)</span>
        <button onclick="goPage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>Next ‚Ä∫</button>`;
        }

        function goPage(p) {
            const total = Math.ceil(filteredUsers.length / PAGE_SIZE);
            if (p < 1 || p > total) return;
            currentPage = p;
            render();
            const target = window.innerWidth < 1024
                ? document.getElementById('mobileCards')
                : document.querySelector('.table-container');
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function setTableLoading() {
            document.getElementById('tblBody').innerHTML =
                `<tr><td colspan="5" class="loading"><div class="spinner"></div><p style="margin-top:16px">Memuat data dari Google Sheets...</p></td></tr>`;
            document.getElementById('mobileCards').innerHTML = '';
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // FORM: TAMBAH / EDIT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function openForm(mode, id) {
            editingId = null;
            clearErrs();
            const isEdit = mode === 'edit';
            document.getElementById('formTitle').textContent = isEdit ? 'Edit Akun' : 'Tambah Akun Baru';
            document.getElementById('saveLbl').textContent = isEdit ? 'Perbarui Akun' : 'Simpan Akun';
            document.getElementById('passReqMark').style.display = isEdit ? 'none' : 'inline';
            document.getElementById('passHint').style.display = isEdit ? 'block' : 'none';
            document.getElementById('fPassword').placeholder = isEdit ? 'Kosongkan jika tidak diubah' : 'Minimal 8 karakter';

            if (isEdit) {
                const u = allUsers.find(x => x.id === id);
                if (!u) return;
                editingId = id;
                document.getElementById('fName').value = u.name;
                document.getElementById('fEmail').value = u.email;
                document.getElementById('fPassword').value = '';
                const r = document.querySelector(`input[name="fRole"][value="${u.role}"]`);
                if (r) r.checked = true;
            } else {
                document.getElementById('fName').value = '';
                document.getElementById('fEmail').value = '';
                document.getElementById('fPassword').value = '';
                document.querySelector('input[name="fRole"][value="admin"]').checked = true;
            }

            closeModal('ovView');
            openModal('ovForm');
        }

        async function saveAccount() {
            clearErrs();
            const name = document.getElementById('fName').value.trim();
            const email = document.getElementById('fEmail').value.trim();
            const password = document.getElementById('fPassword').value;
            const role = document.querySelector('input[name="fRole"]:checked')?.value || 'admin';
            let valid = true;

            if (!name) { showErr('eName', 'fName'); valid = false; }
            if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { showErr('eEmail', 'fEmail'); valid = false; }
            if (!editingId && password.length < 8) { showErr('ePassword', 'fPassword'); valid = false; }
            if (editingId && password && password.length < 8) { showErr('ePassword', 'fPassword'); valid = false; }
            if (!valid) return;

            const btn = document.getElementById('btnSave');
            btn.disabled = true;
            btn.innerHTML = `<span class="spinner spinner-sm"></span> Menyimpan...`;

            try {
                let payload;
                if (editingId) {
                    payload = { action: 'updateUser', id: editingId, name, email, role };
                    if (password) payload.password = password;
                } else {
                    payload = { action: 'createUser', name, email, password, role };
                }
                const res = await gasRequest(payload);
                if (res.status === 'success') {
                    Toast.success(editingId ? 'Akun berhasil diperbarui!' : 'Akun baru berhasil dibuat!');
                    closeModal('ovForm');
                    await loadUsers();
                } else {
                    throw new Error(res.message || 'Gagal menyimpan');
                }
            } catch (err) {
                Toast.error('Error: ' + err.message);
            } finally {
                btn.disabled = false;
                btn.innerHTML = `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg> <span id="saveLbl">${editingId ? 'Perbarui Akun' : 'Simpan Akun'}</span>`;
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // VIEW DETAIL
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function viewUser(id) {
            const u = allUsers.find(x => x.id === id);
            if (!u) return;
            document.getElementById('vAv').style.background = avColor(u.email);
            document.getElementById('vAv').textContent = initials(u.name);
            document.getElementById('vName').textContent = u.name;
            document.getElementById('vEmail').textContent = u.email;
            document.getElementById('vRoleBadge').innerHTML = roleBadge(u.role);
            document.getElementById('vId').textContent = u.id;
            document.getElementById('vRole').textContent = roleLabel(u.role);
            document.getElementById('vEmailFull').textContent = u.email;
            document.getElementById('vCreated').textContent = fmtDate(u.createdAt);
            document.getElementById('vEditBtn').onclick = () => { closeModal('ovView'); openForm('edit', id); };
            openModal('ovView');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // DELETE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function confirmDelete(id) {
            const u = allUsers.find(x => x.id === id);
            if (!u) return;
            document.getElementById('delName').textContent = u.name;
            document.getElementById('btnConfirmDel').onclick = () => doDelete(id);
            openModal('ovDelete');
        }

        async function doDelete(id) {
            const btn = document.getElementById('btnConfirmDel');
            btn.disabled = true;
            btn.innerHTML = `<span class="spinner spinner-sm"></span> Menghapus...`;
            try {
                const res = await gasRequest({ action: 'deleteUser', id });
                if (res.status === 'success') {
                    Toast.success('Akun berhasil dihapus!');
                    closeModal('ovDelete');
                    await loadUsers();
                } else {
                    throw new Error(res.message || 'Gagal menghapus');
                }
            } catch (err) {
                Toast.error('Error: ' + err.message);
            } finally {
                btn.disabled = false;
                btn.innerHTML = `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg> Ya, Hapus`;
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // MODAL HELPERS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        // Close on overlay background click
        document.querySelectorAll('.modal-overlay').forEach(ov => {
            ov.addEventListener('click', e => { if (e.target === ov) ov.style.display = 'none'; });
        });

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // FORM ERROR HELPERS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function clearErrs() {
            document.querySelectorAll('.field-err').forEach(e => e.style.display = 'none');
            document.querySelectorAll('.input-field').forEach(e => e.classList.remove('err'));
        }
        function showErr(errId, fieldId) {
            const e = document.getElementById(errId); if (e) e.style.display = 'block';
            const f = document.getElementById(fieldId); if (f) f.classList.add('err');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // API STATUS BAR
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function showApiBar(type, msg) {
            const bar = document.getElementById('apiBar');
            bar.className = 'api-bar ' + type;
            bar.innerHTML = `<div class="api-dot"></div> ${esc(msg)}`;
            if (type === 'ok') setTimeout(() => { bar.className = 'api-bar'; }, 4000);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // UTIL
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function roleBadge(role) {
            if (role === 'superadmin') return `<span class="badge badge-super"><span class="badge-dot"></span>Super Admin</span>`;
            if (role === 'admin') return `<span class="badge badge-admin"><span class="badge-dot"></span>Admin</span>`;
            return `<span class="badge badge-viewer"><span class="badge-dot"></span>Viewer</span>`;
        }
        function roleLabel(role) { return { superadmin: 'Super Admin', admin: 'Admin', viewer: 'Viewer' }[role] || role; }
        function fmtDate(d) {
            if (!d || d === '‚Äî') return '‚Äî';
            try { const dt = new Date(d); return isNaN(dt) ? d : dt.toLocaleDateString('id-ID', { day: '2-digit', month: 'short', year: 'numeric' }); }
            catch { return d; }
        }
        function esc(s) { return String(s || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;'); }
        function escA(s) { return String(s || '').replace(/'/g, "\\'"); }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // AUTH & LOGOUT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function logout() {
            if (confirm('Apakah Anda yakin ingin keluar?')) { localStorage.clear(); window.location.href = 'login.html'; }
        }
    </script>
</body>

</html>